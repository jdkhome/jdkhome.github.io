(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{466:function(s,a,e){"use strict";e.r(a);var t=e(30),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker-绑定宿主机的网卡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-绑定宿主机的网卡"}},[s._v("#")]),s._v(" docker 绑定宿主机的网卡")]),s._v(" "),e("p",[s._v("如果你的宿主机，有多个网卡，每个网卡的ip地址不同，这个时候，容器内部出网流量的ip就无法指定。\nDocker 并没有直接提供实现该需求的方法。")]),s._v(" "),e("p",[s._v("但是这个需求，可以通过iptable做NAT转发实现。")]),s._v(" "),e("h2",{attrs:{id:"查看要绑定的宿主机ip"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看要绑定的宿主机ip"}},[s._v("#")]),s._v(" 查看要绑定的宿主机ip")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" addr\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("比如我这里的ip是 192.168.12.48")]),s._v(" "),e("h2",{attrs:{id:"将docker的流量转发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将docker的流量转发"}},[s._v("#")]),s._v(" 将docker的流量转发")]),s._v(" "),e("p",[s._v("docker默认网桥是 172.17.0.0")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("iptables -t nat -I POSTROUTING -p all -s "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.0/16 -j SNAT --to-source "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".12.48\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("一般来说启动容器的时候，没有指定网桥的话，就会是这个，这样就能够把这个网桥上的所有流量都转到192.168.12.48了")]),s._v(" "),e("p",[s._v("如果想对指定某一个容器进行这样的流量转发，你需要把这个容器单独指定网桥，然后再像上面这样去做")])])}),[],!1,null,null,null);a.default=r.exports}}]);