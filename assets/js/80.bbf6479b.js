(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{488:function(s,a,t){"use strict";t.r(a);var n=t(30),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"harbor搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#harbor搭建"}},[s._v("#")]),s._v(" harbor搭建")]),s._v(" "),t("h2",{attrs:{id:"准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),t("h3",{attrs:{id:"安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装docker")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("apt install docker.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"安装docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装docker-compose"}},[s._v("#")]),s._v(" 安装docker-compose")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('curl -L "https://github.com/docker/compose/releases/download/1.27.2/docker-compose-Linux-x86_64" -o /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\ndocker-compose --version\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"准备证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备证书"}},[s._v("#")]),s._v(" 准备证书")]),s._v(" "),t("p",[s._v("生成根证书私钥")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mkdir -p /data/cert && cd /data/cert\nopenssl genrsa -out ca.key 2048 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("生成自签名证书")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('openssl req -x509 -new -nodes -key ca.key -days 10000 -out ca.crt -subj "/CN=Harbor-ca"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果遇到报错:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Can't load /root/.rnd into RNG\n140598752473536:error:2406F079:random number generator:RAND_load_file:Cannot open file:../crypto/rand/randfile.c:88:Filename=/root/.rnd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("解决方案：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd /root\nopenssl rand -writerand .rnd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("重新生成自签名证书")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('cd /data/cert\nopenssl req -x509 -new -nodes -key ca.key -days 10000 -out ca.crt -subj "/CN=Harbor-ca"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("生成服务器端私钥和CSR签名")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("openssl req -newkey rsa:4096 -nodes -sha256 -keyout harbor.key -out harbor.csr\n# ... 一路回车就好\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("签发服务器证书")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("echo subjectAltName = IP:192.168.1.190 > extfile.cnf\nopenssl x509 -req -in harbor.csr -CA ca.crt -CAkey ca.key -CAcreateserial -days 365 -extfile extfile.cnf -out harbor.crt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"安装harbor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装harbor"}},[s._v("#")]),s._v(" 安装harbor")]),s._v(" "),t("h3",{attrs:{id:"下载harbor离线包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载harbor离线包"}},[s._v("#")]),s._v(" 下载harbor离线包")]),s._v(" "),t("p",[s._v("https://github.com/goharbor/harbor/releases")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 下载harbor离线包 https://github.com/goharbor/harbor/releases\nwget https://github.com/goharbor/harbor/releases/download/v2.0.0/harbor-offline-installer-v2.0.0.tgz\n\n# 解压\ntar zxf harbor-offline-installer-v2.0.0.tgz -C /data\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"准备配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备配置文件"}},[s._v("#")]),s._v(" 准备配置文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd /data/harbor\ncp harbor.yml.tmpl harbor.yml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("下面是我的配置，主要是改了ip、证书、密码、data目录")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Configuration file of Harbor")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The IP address or hostname to access admin UI and registry service.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostname")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.1.190\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http related config")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# port for http, default is 80. If https enabled, this port will redirect to https port")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https related config")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("https")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https port for harbor, default is 443")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The path of cert and key files for nginx")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("certificate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data/cert/harbor.crt\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("private_key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data/cert/harbor.key\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # Uncomment following will enable tls communication between all harbor components")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# internal_tls:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # set enabled to true means internal tls is enabled")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   enabled: true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # put your cert and key files on dir")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   dir: /etc/harbor/tls/internal")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment external_url if you want to enable external proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# And when it enabled the hostname will no longer used")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# external_url: https://reg.mydomain.com:8433")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The initial password of Harbor admin")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It only works in first time to install harbor")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Remember Change the admin password from UI after launching Harbor.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("harbor_admin_password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1234abc\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Harbor DB configuration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("database")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The password for the root user of Harbor DB. Change this before any production use.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" root123\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The maximum number of connections in the idle connection pool. If it <=0, no idle connections are retained.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max_idle_conns")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The maximum number of open connections to the database. If it <= 0, then there is no limit on the number of open connections.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note: the default number of connections is 100 for postgres.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max_open_conns")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The default data volume")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("data_volume")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data/harbor/data\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Harbor Storage settings by default is using /data dir on local filesystem")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment storage_service setting If you want to using external storage")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# storage_service:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # ca_bundle is the path to the custom root ca certificate, which will be injected into the truststore")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # of registry's and chart repository's containers.  This is usually needed when the user hosts a internal storage with self signed certificate.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   ca_bundle:")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # storage backend, default is filesystem, options include filesystem, azure, gcs, s3, swift and oss")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # for more info about this configuration please refer https://docs.docker.com/registry/configuration/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   filesystem:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     maxthreads: 100")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # set disable to true when you want to disable registry redirect")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   redirect:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     disabled: false")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Clair configuration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("clair")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The interval of clair updaters, the unit is hour, set to 0 to disable the updaters.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("updaters_interval")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Trivy configuration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("trivy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ignoreUnfixed The flag to display only fixed vulnerabilities")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ignore_unfixed")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# skipUpdate The flag to enable or disable Trivy DB downloads from GitHub")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You might want to enable this flag in test or CI/CD environments to avoid GitHub rate limiting issues.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# If the flag is enabled you have to manually download the `trivy.db` file and mount it in the")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /home/scanner/.cache/trivy/db/trivy.db path.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("skip_update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# insecure The flag to skip verifying registry certificate")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("insecure")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# github_token The GitHub access token to download Trivy DB")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Trivy DB contains vulnerability information from NVD, Red Hat, and many other upstream vulnerability databases.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It is downloaded by Trivy from the GitHub release page https://github.com/aquasecurity/trivy-db/releases and cached")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# in the local file system (/home/scanner/.cache/trivy/db/trivy.db). In addition, the database contains the update")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timestamp so Trivy can detect whether it should download a newer version from the Internet or use the cached one.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Currently, the database is updated every 12 hours and published as a new release to GitHub.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Anonymous downloads from GitHub are subject to the limit of 60 requests per hour. Normally such rate limit is enough")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for production operations. If, for any reason, it's not enough, you could increase the rate limit to 5000")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# requests per hour by specifying the GitHub access token. For more details on GitHub rate limiting please consult")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://developer.github.com/v3/#rate-limiting")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You can create a GitHub token by following the instuctions in")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# github_token: xxx")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobservice")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Maximum number of job workers in job service")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max_job_workers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("notification")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Maximum retry count for webhook job")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("webhook_job_max_retry")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("chart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Change the value of absolute_url to enabled can enable absolute url in chart")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("absolute_url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" disabled\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Log configurations")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# options are debug, info, warning, error, fatal")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("level")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" info\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# configs for logs in local storage")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("local")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Log files are rotated log_rotate_count times before being removed. If count is 0, old versions are removed rather than rotated.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rotate_count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Log files are rotated only if they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be in kilobytes.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# If the M is used, the size is in megabytes, and if G is used, the size is in gigabytes. So size 100, size 100k, size 100M and size 100G")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# are all valid.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rotate_size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 200M\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The directory on your host that store log")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("location")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /var/log/harbor\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment following lines to enable external syslog endpoint.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# external_endpoint:")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # protocol used to transmit log to external endpoint, options is tcp or udp")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   protocol: tcp")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # The host of external endpoint")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   host: localhost")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # Port of external endpoint")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   port: 5140")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#This attribute is for migrator to detect the version of the .cfg file, DO NOT MODIFY!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("_version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 2.0.0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment external_database if using external database.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# external_database:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   harbor:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     host: harbor_db_host")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     port: harbor_db_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     db_name: harbor_db_name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     username: harbor_db_username")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     password: harbor_db_password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     ssl_mode: disable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     max_idle_conns: 2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     max_open_conns: 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   clair:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     host: clair_db_host")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     port: clair_db_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     db_name: clair_db_name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     username: clair_db_username")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     password: clair_db_password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     ssl_mode: disable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   notary_signer:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     host: notary_signer_db_host")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     port: notary_signer_db_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     db_name: notary_signer_db_name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     username: notary_signer_db_username")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     password: notary_signer_db_password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     ssl_mode: disable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   notary_server:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     host: notary_server_db_host")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     port: notary_server_db_port")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     db_name: notary_server_db_name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     username: notary_server_db_username")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     password: notary_server_db_password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     ssl_mode: disable")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment external_redis if using external Redis server")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# external_redis:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   host: redis")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   port: 6379")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   password:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   # db_index 0 is for core, it's unchangeable")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   registry_db_index: 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   jobservice_db_index: 2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   chartmuseum_db_index: 3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   clair_db_index: 4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   trivy_db_index: 5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   idle_timeout_seconds: 30")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment uaa for trusting the certificate of uaa instance that is hosted via self-signed cert.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uaa:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   ca_file: /path/to/ca")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Global proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Config http proxy for components, e.g. http://my.proxy.com:3128")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Components doesn't need to connect to each others via http proxy.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Remove component from `components` array if want disable proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for it. If you want use proxy for replication, MUST enable proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for core and jobservice, and set `http_proxy` and `https_proxy`.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Add domain to the `no_proxy` field, when you want disable proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for some special registry.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("proxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http_proxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("https_proxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("no_proxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("components")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" core\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" jobservice\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" clair\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" trivy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br"),t("span",{staticClass:"line-number"},[s._v("143")]),t("br"),t("span",{staticClass:"line-number"},[s._v("144")]),t("br"),t("span",{staticClass:"line-number"},[s._v("145")]),t("br"),t("span",{staticClass:"line-number"},[s._v("146")]),t("br"),t("span",{staticClass:"line-number"},[s._v("147")]),t("br"),t("span",{staticClass:"line-number"},[s._v("148")]),t("br"),t("span",{staticClass:"line-number"},[s._v("149")]),t("br"),t("span",{staticClass:"line-number"},[s._v("150")]),t("br"),t("span",{staticClass:"line-number"},[s._v("151")]),t("br"),t("span",{staticClass:"line-number"},[s._v("152")]),t("br"),t("span",{staticClass:"line-number"},[s._v("153")]),t("br"),t("span",{staticClass:"line-number"},[s._v("154")]),t("br"),t("span",{staticClass:"line-number"},[s._v("155")]),t("br"),t("span",{staticClass:"line-number"},[s._v("156")]),t("br"),t("span",{staticClass:"line-number"},[s._v("157")]),t("br"),t("span",{staticClass:"line-number"},[s._v("158")]),t("br"),t("span",{staticClass:"line-number"},[s._v("159")]),t("br"),t("span",{staticClass:"line-number"},[s._v("160")]),t("br"),t("span",{staticClass:"line-number"},[s._v("161")]),t("br"),t("span",{staticClass:"line-number"},[s._v("162")]),t("br"),t("span",{staticClass:"line-number"},[s._v("163")]),t("br"),t("span",{staticClass:"line-number"},[s._v("164")]),t("br"),t("span",{staticClass:"line-number"},[s._v("165")]),t("br"),t("span",{staticClass:"line-number"},[s._v("166")]),t("br"),t("span",{staticClass:"line-number"},[s._v("167")]),t("br"),t("span",{staticClass:"line-number"},[s._v("168")]),t("br"),t("span",{staticClass:"line-number"},[s._v("169")]),t("br"),t("span",{staticClass:"line-number"},[s._v("170")]),t("br"),t("span",{staticClass:"line-number"},[s._v("171")]),t("br"),t("span",{staticClass:"line-number"},[s._v("172")]),t("br"),t("span",{staticClass:"line-number"},[s._v("173")]),t("br"),t("span",{staticClass:"line-number"},[s._v("174")]),t("br"),t("span",{staticClass:"line-number"},[s._v("175")]),t("br"),t("span",{staticClass:"line-number"},[s._v("176")]),t("br"),t("span",{staticClass:"line-number"},[s._v("177")]),t("br"),t("span",{staticClass:"line-number"},[s._v("178")]),t("br"),t("span",{staticClass:"line-number"},[s._v("179")]),t("br"),t("span",{staticClass:"line-number"},[s._v("180")]),t("br"),t("span",{staticClass:"line-number"},[s._v("181")]),t("br"),t("span",{staticClass:"line-number"},[s._v("182")]),t("br"),t("span",{staticClass:"line-number"},[s._v("183")]),t("br"),t("span",{staticClass:"line-number"},[s._v("184")]),t("br"),t("span",{staticClass:"line-number"},[s._v("185")]),t("br"),t("span",{staticClass:"line-number"},[s._v("186")]),t("br"),t("span",{staticClass:"line-number"},[s._v("187")]),t("br"),t("span",{staticClass:"line-number"},[s._v("188")]),t("br"),t("span",{staticClass:"line-number"},[s._v("189")]),t("br"),t("span",{staticClass:"line-number"},[s._v("190")]),t("br"),t("span",{staticClass:"line-number"},[s._v("191")]),t("br"),t("span",{staticClass:"line-number"},[s._v("192")]),t("br"),t("span",{staticClass:"line-number"},[s._v("193")]),t("br"),t("span",{staticClass:"line-number"},[s._v("194")]),t("br"),t("span",{staticClass:"line-number"},[s._v("195")]),t("br"),t("span",{staticClass:"line-number"},[s._v("196")]),t("br"),t("span",{staticClass:"line-number"},[s._v("197")]),t("br"),t("span",{staticClass:"line-number"},[s._v("198")]),t("br"),t("span",{staticClass:"line-number"},[s._v("199")]),t("br"),t("span",{staticClass:"line-number"},[s._v("200")]),t("br"),t("span",{staticClass:"line-number"},[s._v("201")]),t("br"),t("span",{staticClass:"line-number"},[s._v("202")]),t("br"),t("span",{staticClass:"line-number"},[s._v("203")]),t("br"),t("span",{staticClass:"line-number"},[s._v("204")]),t("br"),t("span",{staticClass:"line-number"},[s._v("205")]),t("br")])]),t("h3",{attrs:{id:"执行安装脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行安装脚本"}},[s._v("#")]),s._v(" 执行安装脚本")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("./install.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"客户端配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端配置"}},[s._v("#")]),s._v(" 客户端配置")]),s._v(" "),t("p",[s._v("主要是推拉镜像的时候，客户端会报证书错误")]),s._v(" "),t("p",[s._v("所以需要将harbor的harbor.crt文件copy给客户端")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mkdir -p /etc/docker/certs.d/192.168.1.190\n\ncat /etc/docker/certs.d/192.168.1.190/harbor.crt\n...\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"维护"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#维护"}},[s._v("#")]),s._v(" 维护")]),s._v(" "),t("h3",{attrs:{id:"重启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启"}},[s._v("#")]),s._v(" 重启")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd /data/harbor\ndocker-compose down -v\ndocker-compose up -d\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"关闭"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭"}},[s._v("#")]),s._v(" 关闭")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd /data/harbor\ndocker-compose down -v\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"卸载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[s._v("#")]),s._v(" 卸载")]),s._v(" "),t("p",[s._v("关了之后把容器、还有目录都删掉就行了")])])}),[],!1,null,null,null);a.default=e.exports}}]);