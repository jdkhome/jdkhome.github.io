(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{443:function(t,r,v){"use strict";v.r(r);var s=v(30),_=Object(s.a)({},(function(){var t=this,r=t.$createElement,v=t._self._c||r;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"鉴权方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#鉴权方式"}},[t._v("#")]),t._v(" 鉴权方式")]),t._v(" "),v("p",[t._v("说到鉴权，首选要提授权，业务中通过各种方式，完成了用户身份验证之后，调用Twiggy的方法为用户生成有期限的v-token"),v("br"),t._v("\n之后用户的请求需要"),v("strong",[t._v("在header中带上v-token")]),t._v("以表身份。")]),t._v(" "),v("p",[t._v("当springboot 接受到请求时，Twiggy通过切面的方式在controller方法处理之前先进行鉴权"),v("br"),t._v("\n如果鉴权不通过 则会直接抛出 无权限异常")]),t._v(" "),v("p",[t._v("鉴权的顺序是:"),v("br"),t._v(" "),v("strong",[t._v("1.功能鉴权")]),t._v(" -> "),v("strong",[t._v("2.资源鉴权")])]),t._v(" "),v("h2",{attrs:{id:"功能鉴权"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#功能鉴权"}},[t._v("#")]),t._v(" 功能鉴权")]),t._v(" "),v("p",[t._v("上一节中 介绍了权限的来源，Twiggy在处理鉴权时取出请求的uri与已有权限对比即完成功能鉴权")]),t._v(" "),v("h2",{attrs:{id:"资源鉴权"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#资源鉴权"}},[t._v("#")]),t._v(" 资源鉴权")]),t._v(" "),v("h3",{attrs:{id:"前置资源鉴权"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#前置资源鉴权"}},[t._v("#")]),t._v(" 前置资源鉴权")]),t._v(" "),v("p",[t._v("当请求参数中已经包含了需要被鉴权的资源时，即可使用前置资源鉴权。")]),t._v(" "),v("p",[t._v("在接口方法处理之前，即可完成数据鉴权")]),t._v(" "),v("p",[v("strong",[t._v("举例：")]),v("br"),t._v(" "),v("strong",[t._v("通过userId获取订单列表")]),t._v("接口")]),t._v(" "),v("h3",{attrs:{id:"后置资源鉴权"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#后置资源鉴权"}},[t._v("#")]),t._v(" 后置资源鉴权")]),t._v(" "),v("p",[t._v("当请求参数中不包含需要被鉴权的资源时，则只能在业务代码中 获取到了具体的资源在进行权限判断")]),t._v(" "),v("p",[v("strong",[t._v("举例：")]),v("br"),t._v(" "),v("strong",[t._v("通过orderNo获取订单详情")]),t._v("接口 只有查询到订单之后才知道订单对应的userId, 请求token是否有权访问")])])}),[],!1,null,null,null);r.default=_.exports}}]);