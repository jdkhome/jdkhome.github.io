(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{425:function(t,s,a){"use strict";a.r(s);var _=a(30),r=Object(_.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"质量优先的免费代理池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#质量优先的免费代理池"}},[t._v("#")]),t._v(" 质量优先的免费代理池")]),t._v(" "),a("p",[t._v("爬虫抓取多家免费代理，根据配置的检查地址检查代理")]),t._v(" "),a("p",[t._v("此代理池并不以数量取胜，而是以质量为目标，从代理池中获取到的代理都是检查验证过的，为防止代理失效，每次使用时都应该从代理池获取新的代理，随用随取。")]),t._v(" "),a("p",[t._v("支持2级代理，即代理池本身提供代理服务，使用代理池的代理服务时，代理池会将其转发至已有的可用代理")]),t._v(" "),a("ul",[a("li",[t._v("必须配置redis")]),t._v(" "),a("li",[t._v("请使用最新的版本 0.0.6")])]),t._v(" "),a("h2",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("docker run -d \\\n--name proxy-pool \\\n--restart=always \\\n-p 2233:2233 \\\n-p 2333:2333 \\\n-e CONFIG_REDIS_HOST=[redis_host:port] \\\n-e CONFIG_REDIS_PWD=[redis_password] \\\njdkhome/proxy-pool:0.0.6\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# 获取单条代理 返回单条代理\n~ curl http://192.168.1.190:2233\nhttp://191.97.9.36:9991\n# 批量获取代理 返回json数组\n~ curl http://192.168.1.190:2233?count=5\n["http://5.196.1.235:3128","http://149.248.52.175:8080","http://223.241.5.13:4216","http://58.251.234.201:9797","http://178.33.251.230:3129"]\n#  向代理池中加入代理 返回加载条数\n~ curl -X PUT http://192.168.1.190:2233 -H \'Content-type\':\'application/json\' -d "{\\"proxys\\":[\\"http://213.6.162.6:8080\\",\\"http://125.209.73.170:3128\\"]}"\n2\n# 使用代理服务(注意端口和http服务端口不同)\n~ curl https://api.myip.com --proxy http://192.168.1.190:2333\n{"ip":"128.199.151.21","country":"Singapore","cc":"SG"}\n~ curl https://api.myip.com --proxy http://192.168.1.190:2333\n{"ip":"139.162.57.51","country":"Singapore","cc":"SG"}\n~ curl https://api.myip.com --proxy http://192.168.1.190:2333\n{"ip":"58.220.95.78","country":"China","cc":"CN"}\n~ curl https://api.myip.com --proxy http://192.168.1.190:2333\n{"ip":"82.200.233.4","country":"Kazakhstan","cc":"KZ"}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("h2",{attrs:{id:"所有配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#所有配置"}},[t._v("#")]),t._v(" 所有配置")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",[t._v("默认值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("CONFIG_HTTPPORT")]),t._v(" "),a("td",[t._v("http服务端口号")]),t._v(" "),a("td",[t._v("2233")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_PROXYPORT")]),t._v(" "),a("td",[t._v("proxy服务端口号")]),t._v(" "),a("td",[t._v("2333")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_TESTURL")]),t._v(" "),a("td",[t._v("验证代理的地址(http code 200 即通过)")]),t._v(" "),a("td",[t._v("https://www.baidu.com/robots.txt")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_TESTTIMEOUT")]),t._v(" "),a("td",[t._v("验证代理时的timeout(单位秒)")]),t._v(" "),a("td",[t._v("15")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_BLACKTIMEOUT")]),t._v(" "),a("td",[t._v("黑名单超时时间(单位秒)")]),t._v(" "),a("td",[t._v("180")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_REDIS_HOST")]),t._v(" "),a("td",[t._v("redis连接地址")]),t._v(" "),a("td",[t._v("192.168.1.116:6379")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_REDIS_PWD")]),t._v(" "),a("td",[t._v("redis 密码")]),t._v(" "),a("td",[t._v("ikun520520520")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_REDIS_DB")]),t._v(" "),a("td",[t._v("redis db")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_REDIS_KEYPREFIX")]),t._v(" "),a("td",[t._v("redis键前缀")]),t._v(" "),a("td",[t._v("proxy_pool")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_CHECKNUMS")]),t._v(" "),a("td",[t._v("用于检查代理的携程数量")]),t._v(" "),a("td",[t._v("100")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_TESTNUMS")]),t._v(" "),a("td",[t._v("同于测试代理的携程数量")]),t._v(" "),a("td",[t._v("200")])]),t._v(" "),a("tr",[a("td",[t._v("CONFIG_TRYCOUNT")]),t._v(" "),a("td",[t._v("代理模式尝试的代理数量")]),t._v(" "),a("td",[t._v("10")])])])]),t._v(" "),a("h2",{attrs:{id:"集群部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群部署"}},[t._v("#")]),t._v(" 集群部署")]),t._v(" "),a("p",[t._v("此代理池支持集群部署，不同节点只需指定相同的验证地址和redis配置，即可自动组成集群并自动协调代理测试和验证任务。")]),t._v(" "),a("p",[t._v("可根据不同机器的配置自行调整每个节点的携程数量，节点多的话也可以把黑名单时间降低")]),t._v(" "),a("p",[t._v("可为代理服务部署负载均衡")]),t._v(" "),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),a("p",[t._v("免费代理质量真的不高，所以建议根据自己程序的需求，来配置代理池的检测规则")])])}),[],!1,null,null,null);s.default=r.exports}}]);